# 데이터베이스 스키마 참조 문서

이 문서는 Compete_Ohun 프로젝트의 모든 데이터베이스 테이블과 각 속성의 역할, 용도를 상세히 설명합니다.

---

## 📋 목차

1. [users (사용자)](#1-users-사용자)
2. [social_accounts (소셜 계정)](#2-social_accounts-소셜-계정)
3. [groups (모임)](#3-groups-모임)
4. [group_participants (모임 참가자)](#4-group_participants-모임-참가자)
5. [facilities (시설)](#5-facilities-시설)
6. [notifications (알림)](#6-notifications-알림)
7. [phone_verifications (전화번호 인증)](#7-phone_verifications-전화번호-인증)

---

## 1. users (사용자)

**테이블 목적**: 서비스의 모든 사용자 정보를 저장하는 핵심 테이블

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 사용자 고유 식별자
  - **용도**: 모든 사용자 관련 작업에서 사용자 식별
  - **사용 예시**: 로그인 인증, 모임 생성자 식별, 참가자 목록 조회

#### 로그인 정보
- **`email`** (varchar(255), unique, nullable, 인덱스)
  - **역할**: 일반 로그인용 이메일 주소
  - **용도**: 이메일/비밀번호 로그인 시 사용자 식별
  - **제약사항**: unique 제약으로 중복 가입 방지
  - **nullable**: 소셜 로그인 사용자는 null 가능

- **`passwordHash`** (varchar(255), nullable)
  - **역할**: 비밀번호 해시값 (bcrypt 암호화)
  - **용도**: 로그인 시 비밀번호 검증
  - **보안**: 평문 비밀번호는 절대 저장하지 않음
  - **nullable**: 소셜 로그인 사용자는 null

#### 연락처 정보
- **`phone`** (varchar(20), unique, nullable, 인덱스)
  - **역할**: 사용자 전화번호
  - **형식**: `010-1234-5678` 또는 `01012345678`
  - **용도**: 전화번호 인증, 연락처 표시
  - **제약사항**: unique로 중복 가입 방지

- **`phoneVerified`** (boolean, 기본값: false)
  - **역할**: 전화번호 본인인증 완료 여부
  - **용도**: 인증된 사용자만 특정 기능 사용 가능하도록 제한
  - **업데이트 시점**: `phone_verifications` 테이블에서 인증 완료 시 true로 변경

#### 실명인증 정보
- **`realName`** (varchar(50), nullable)
  - **역할**: 사용자 실명
  - **용도**: 실명인증 완료 시 저장 (법적 요구사항 대응)
  - **보안**: 민감정보이므로 접근 제한 필요

- **`realNameVerified`** (boolean, 기본값: false)
  - **역할**: 실명인증 완료 여부
  - **용도**: 실명인증이 필요한 서비스 이용 시 확인
  - **업데이트 시점**: 본인인증 API 연동 후 true로 변경

#### 서비스 필수 정보
- **`nickname`** (varchar(50), unique, 인덱스)
  - **역할**: 사용자 닉네임 (서비스 내 표시명)
  - **용도**: 모든 사용자 표시 화면에서 사용
  - **제약사항**: unique로 중복 방지, 필수 입력

- **`gender`** (enum: 'male' | 'female' | 'other', nullable)
  - **역할**: 성별 정보
  - **용도**: 통계, 필터링, 모임 매칭 등
  - **nullable**: 선택 입력 항목

- **`ageRange`** (varchar(20), nullable)
  - **역할**: 연령대 정보
  - **형식**: `'20-24'`, `'25-29'`, `'30-34'` 등
  - **용도**: 연령대별 모임 추천, 통계

- **`birthDate`** (date, nullable)
  - **역할**: 생년월일
  - **용도**: 정확한 연령 계산, 생일 이벤트 등

- **`residenceSido`** (varchar(50))
  - **역할**: 거주지 시/도
  - **용도**: 지역별 모임 필터링, 지도 표시
  - **필수**: 서비스 이용을 위한 필수 정보

- **`residenceSigungu`** (varchar(50))
  - **역할**: 거주지 시/군/구
  - **용도**: 세부 지역별 모임 필터링
  - **필수**: 서비스 이용을 위한 필수 정보

#### 위치 정보
- **`latitude`** (decimal(10,7), nullable)
  - **역할**: 사용자 위치 위도
  - **용도**: 지도에 사용자 위치 표시, 거리 기반 모임 추천
  - **정밀도**: 소수점 7자리 (약 1cm 정밀도)

- **`longitude`** (decimal(10,7), nullable)
  - **역할**: 사용자 위치 경도
  - **용도**: 지도에 사용자 위치 표시, 거리 기반 모임 추천
  - **정밀도**: 소수점 7자리

#### 선택 정보
- **`interestedSports`** (text array, 기본값: [])
  - **역할**: 관심 운동 종목 목록
  - **형식**: `['배드민턴', '축구', '농구']` 등
  - **용도**: 관심 종목 기반 모임 추천, 통계

- **`skillLevel`** (enum: 'beginner' | 'intermediate' | 'advanced', nullable)
  - **역할**: 운동 실력 수준
  - **용도**: 실력별 모임 매칭, 랭킹 시스템

#### 약관 동의
- **`termsServiceAgreed`** (boolean, 기본값: false)
  - **역할**: 서비스 이용약관 동의 여부
  - **용도**: 약관 동의 필수 확인
  - **업데이트 시점**: 회원가입 시

- **`termsPrivacyAgreed`** (boolean, 기본값: false)
  - **역할**: 개인정보 처리방침 동의 여부
  - **용도**: 개인정보 처리 동의 확인
  - **업데이트 시점**: 회원가입 시

- **`marketingConsent`** (boolean, 기본값: false)
  - **역할**: 마케팅 정보 수신 동의 (전체)
  - **용도**: 마케팅 메시지 발송 여부 결정

- **`marketingEmailConsent`** (boolean, 기본값: false)
  - **역할**: 이메일 마케팅 수신 동의
  - **용도**: 이메일 마케팅 발송 여부 결정

- **`marketingSmsConsent`** (boolean, 기본값: false)
  - **역할**: SMS 마케팅 수신 동의
  - **용도**: SMS 마케팅 발송 여부 결정

#### 계정 상태
- **`status`** (enum: 'pending' | 'active' | 'suspended' | 'deleted', 기본값: 'pending', 인덱스)
  - **역할**: 계정 상태
  - **값 설명**:
    - `pending`: 가입 대기 (프로필 미완성)
    - `active`: 정상 사용 가능
    - `suspended`: 정지된 계정
    - `deleted`: 삭제된 계정
  - **용도**: 로그인 가능 여부 판단, 계정 관리

- **`isProfileComplete`** (boolean, 기본값: false)
  - **역할**: 프로필 정보 입력 완료 여부
  - **용도**: 서비스 이용 가능 여부 판단
  - **업데이트 시점**: 필수 정보 입력 완료 시 true

#### 사업자 정보
- **`businessNumber`** (varchar(20), nullable)
  - **역할**: 사업자번호
  - **형식**: `XXX-XX-XXXXX` (10자리)
  - **용도**: 시설 등록 시 사업자 인증

- **`businessNumberVerified`** (boolean, 기본값: false)
  - **역할**: 사업자번호 검증 완료 여부
  - **용도**: 시설 등록 권한 확인

#### 프로필 사진
- **`profileImageUrl`** (text, nullable)
  - **역할**: 프로필 사진 URL
  - **형식**: base64 인코딩 문자열 또는 파일 경로
  - **용도**: 사용자 프로필 이미지 표시

#### 메타 정보
- **`createdAt`** (timestamp, 자동 생성)
  - **역할**: 계정 생성 시각
  - **용도**: 가입일 표시, 통계

- **`updatedAt`** (timestamp, 자동 업데이트)
  - **역할**: 정보 수정 시각
  - **용도**: 최근 수정일 추적

- **`lastLoginAt`** (timestamp, nullable)
  - **역할**: 마지막 로그인 시각
  - **용도**: 비활성 계정 관리, 보안 모니터링
  - **업데이트 시점**: 로그인 성공 시

#### 관계
- **`socialAccounts`** (OneToMany → SocialAccount)
  - **역할**: 연동된 소셜 계정 목록
  - **용도**: 소셜 로그인 관리

---

## 2. social_accounts (소셜 계정)

**테이블 목적**: 사용자의 소셜 로그인 계정 정보를 저장

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 소셜 계정 레코드 고유 식별자
  - **용도**: 소셜 계정 관리

#### 사용자 관계
- **`user`** (ManyToOne → User)
  - **역할**: 소유자 사용자 객체
  - **용도**: 사용자 정보 조회

- **`userId`** (integer, Foreign Key → users.id, 인덱스)
  - **역할**: 소유자 사용자 ID
  - **용도**: 사용자와 소셜 계정 연결
  - **CASCADE**: 사용자 삭제 시 소셜 계정도 삭제

#### 소셜 제공자 정보
- **`provider`** (enum: 'kakao' | 'google', 인덱스)
  - **역할**: 소셜 로그인 제공자
  - **용도**: 로그인 플로우 분기, 제공자별 처리
  - **제약사항**: `provider` + `providerUserId` 조합이 unique

- **`providerUserId`** (varchar(255), 인덱스)
  - **역할**: 소셜 서비스의 사용자 고유 ID
  - **용도**: 소셜 서비스에서 사용자 식별
  - **제약사항**: `provider` + `providerUserId` 조합이 unique

#### 소셜 서비스 정보 (참고용)
- **`providerEmail`** (varchar(255), nullable)
  - **역할**: 소셜 서비스에서 제공한 이메일
  - **용도**: 초기 프로필 정보 설정 시 참고
  - **nullable**: 이메일 제공을 거부한 경우 null

- **`providerName`** (varchar(255), nullable)
  - **역할**: 소셜 서비스에서 제공한 이름
  - **용도**: 초기 닉네임 설정 시 참고

- **`providerProfileImageUrl`** (text, nullable)
  - **역할**: 소셜 서비스에서 제공한 프로필 이미지 URL
  - **용도**: 초기 프로필 이미지 설정 시 사용

#### 연동 상태
- **`isPrimary`** (boolean, 기본값: false)
  - **역할**: 주요 로그인 계정 여부
  - **용도**: 여러 소셜 계정 연동 시 기본 계정 지정

#### 메타 정보
- **`linkedAt`** (timestamp, 자동 생성)
  - **역할**: 소셜 계정 연동 시각
  - **용도**: 연동일 추적

- **`lastUsedAt`** (timestamp, nullable)
  - **역할**: 마지막 로그인 시각 (이 소셜 계정으로)
  - **용도**: 사용 빈도 추적

---

## 3. groups (모임)

**테이블 목적**: 사용자가 생성한 운동 모임 정보를 저장

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 모임 고유 식별자
  - **용도**: 모임 조회, 참가, 수정, 삭제 시 사용

#### 모임 기본 정보
- **`name`** (varchar(100))
  - **역할**: 모임 이름
  - **용도**: 모임 목록, 상세보기에서 표시
  - **예시**: "청민 1월 2주차 목요일 배드민턴"

- **`location`** (varchar(200))
  - **역할**: 모임 장소 주소
  - **용도**: 모임 상세 정보 표시, 지도 마커 표시
  - **예시**: "대전 서구 월평동로 2 (갈마동, 갈마초등학교)"

- **`latitude`** (decimal(10,8), 인덱스)
  - **역할**: 모임 장소 위도
  - **용도**: 지도에 마커 표시, 거리 계산
  - **정밀도**: 소수점 8자리

- **`longitude`** (decimal(11,8), 인덱스)
  - **역할**: 모임 장소 경도
  - **용도**: 지도에 마커 표시, 거리 계산
  - **정밀도**: 소수점 8자리

- **`category`** (varchar(50), 인덱스)
  - **역할**: 운동 종목 (종목별 관리)
  - **용도**: 종목별 필터링, 카테고리별 목록 조회
  - **현재**: 지원 종목은 **축구**만 (추후 종목 추가 예정)
  - **예시**: "축구"

- **`description`** (text, nullable)
  - **역할**: 모임 상세 설명
  - **용도**: 모임 상세보기에서 표시
  - **nullable**: 선택 입력 항목

- **`meetingTime`** (varchar(200), nullable)
  - **역할**: 모임 일정
  - **형식**: "2026-01-08 18:00" 또는 "매주 토요일 10:00"
  - **용도**: 모임 일정 표시, 일정별 정렬
  - **nullable**: 일정 미정인 경우 null

- **`contact`** (varchar(50), nullable)
  - **역할**: 연락처
  - **용도**: 모임 관련 문의
  - **nullable**: 선택 입력 항목

#### 준비물
- **`equipment`** (text array, 기본값: [])
  - **역할**: 필요한 준비물 목록
  - **형식**: `['라켓', '셔틀콕', '운동화', '물']`
  - **용도**: 모임 상세보기에서 준비물 안내

#### 생성자 정보
- **`creator`** (ManyToOne → User)
  - **역할**: 모임 생성자 객체
  - **용도**: 생성자 정보 조회

- **`creatorId`** (integer, Foreign Key → users.id, 인덱스)
  - **역할**: 모임 생성자 ID
  - **용도**: 생성자 식별, 권한 확인
  - **CASCADE**: 사용자 삭제 시 모임도 삭제

#### 참가자 정보
- **`participantCount`** (integer, 기본값: 1)
  - **역할**: 현재 참가자 수 (생성자 포함)
  - **용도**: 모임 목록에서 참가자 수 표시, 마감 여부 판단
  - **업데이트 시점**: 참가/탈퇴 시 자동 업데이트

- **`maxParticipants`** (integer, nullable)
  - **역할**: 최대 참가자 수
  - **용도**: 모임 마감 여부 판단
  - **nullable**: 제한 없음 (null)

- **`participants`** (OneToMany → GroupParticipant)
  - **역할**: 참가자 목록
  - **용도**: 참가자 목록 조회

#### 매치 유형 (매치유형별 관리)
- **`type`** (varchar(20), 기본값: 'normal', 인덱스)
  - **역할**: 매치 유형
  - **값**: `normal`(일반 매치), `rank`(랭크매치), `event`(이벤트매치)
  - **용도**: 홈 화면 일반/랭크/이벤트 탭 필터링

#### 모임 상태
- **`isActive`** (boolean, 기본값: true)
  - **역할**: 모임 활성화 여부
  - **용도**: 삭제된 모임 숨김 처리 (soft delete)
  - **false 시**: 목록에서 제외

- **`isClosed`** (boolean, 기본값: false)
  - **역할**: 모임 인원 마감 여부
  - **용도**: 새로운 참가자 수락 여부 판단
  - **업데이트 시점**: 생성자가 마감 처리 시

#### 메타 정보
- **`createdAt`** (timestamp, 자동 생성)
  - **역할**: 모임 생성 시각
  - **용도**: 생성일 표시, 최신 모임 정렬

- **`updatedAt`** (timestamp, 자동 업데이트)
  - **역할**: 모임 정보 수정 시각
  - **용도**: 최근 수정일 추적

---

## 4. group_participants (모임 참가자)

**테이블 목적**: 모임에 참가한 사용자 정보를 저장 (생성자 제외)

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 참가 레코드 고유 식별자
  - **용도**: 참가자 삭제, 참가 이력 추적

#### 모임 관계
- **`group`** (ManyToOne → Group)
  - **역할**: 참가한 모임 객체
  - **용도**: 모임 정보 조회

- **`groupId`** (integer, Foreign Key → groups.id, 인덱스, NOT NULL)
  - **역할**: 참가한 모임 ID
  - **용도**: 모임과 참가자 연결
  - **CASCADE**: 모임 삭제 시 참가자 레코드도 삭제
  - **제약사항**: `groupId` + `userId` 조합이 unique

#### 사용자 관계
- **`user`** (ManyToOne → User)
  - **역할**: 참가자 사용자 객체
  - **용도**: 참가자 정보 조회

- **`userId`** (integer, Foreign Key → users.id, 인덱스, NOT NULL)
  - **역할**: 참가자 사용자 ID
  - **용도**: 사용자와 참가 연결
  - **CASCADE**: 사용자 삭제 시 참가자 레코드도 삭제
  - **제약사항**: `groupId` + `userId` 조합이 unique

#### 참가 상태
- **`status`** (varchar(20), 기본값: 'joined')
  - **역할**: 참가 상태
  - **값 설명**:
    - `'joined'`: 참가 중
    - `'cancelled'`: 참가 취소 (현재는 사용하지 않음)
  - **참고**: 현재 로직에서는 레코드 존재 = 참가, 레코드 삭제 = 탈퇴로 처리
  - **용도**: 참가 상태 추적 (향후 확장 가능)

#### 메타 정보
- **`joinedAt`** (timestamp, 자동 생성)
  - **역할**: 참가 시각
  - **용도**: 참가일 표시, 최근 참가자 정렬

---

## 5. facilities (시설)

**테이블 목적**: 운동 시설 정보를 저장 (체육관, 체육센터 등)

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 시설 고유 식별자
  - **용도**: 시설 조회, 수정, 삭제 시 사용

#### 시설 기본 정보
- **`name`** (varchar(100))
  - **역할**: 시설명
  - **용도**: 시설 목록, 상세보기에서 표시
  - **예시**: "갈마초등학교 체육관"

- **`type`** (varchar(50), 인덱스)
  - **역할**: 시설 종류
  - **용도**: 시설 종류별 필터링
  - **예시**: "체육센터", "체육관", "풋살장", "테니스장", "수영장", "골프연습장", "기타"

- **`address`** (varchar(200))
  - **역할**: 시설 주소
  - **용도**: 시설 위치 표시, 지도 마커 표시

- **`latitude`** (decimal(10,8), nullable, 인덱스)
  - **역할**: 시설 위도
  - **용도**: 지도에 마커 표시, 거리 계산
  - **nullable**: 주소만 있고 좌표가 없는 경우

- **`longitude`** (decimal(11,8), nullable, 인덱스)
  - **역할**: 시설 경도
  - **용도**: 지도에 마커 표시, 거리 계산
  - **nullable**: 주소만 있고 좌표가 없는 경우

- **`phone`** (varchar(20), nullable)
  - **역할**: 시설 전화번호
  - **용도**: 시설 문의
  - **nullable**: 전화번호가 없는 경우

- **`operatingHours`** (varchar(100), nullable)
  - **역할**: 운영시간
  - **형식**: "06:00 - 22:00" 또는 "24시간"
  - **용도**: 시설 이용 가능 시간 안내

- **`price`** (varchar(100), nullable)
  - **역할**: 이용 요금
  - **형식**: "시간당 15,000원" 또는 "회원 10,000원"
  - **용도**: 이용 요금 안내

- **`description`** (text, nullable)
  - **역할**: 시설 설명
  - **용도**: 시설 상세 정보 표시

- **`amenities`** (text array, 기본값: [])
  - **역할**: 편의시설 목록
  - **형식**: `['주차', '샤워실', '락커룸', '매점']`
  - **용도**: 시설 편의시설 안내

- **`image`** (text, nullable)
  - **역할**: 시설 이미지 URL
  - **용도**: 시설 이미지 표시

#### 평점 및 리뷰
- **`rating`** (decimal(3,2), 기본값: 0)
  - **역할**: 평균 평점
  - **범위**: 0.00 ~ 5.00
  - **용도**: 시설 평점 표시, 평점순 정렬
  - **업데이트 시점**: 리뷰 작성/수정/삭제 시 재계산

- **`reviewCount`** (integer, 기본값: 0)
  - **역할**: 리뷰 개수
  - **용도**: 리뷰 수 표시
  - **업데이트 시점**: 리뷰 작성/삭제 시

#### 등록자 정보
- **`owner`** (ManyToOne → User)
  - **역할**: 시설 등록자 객체
  - **용도**: 등록자 정보 조회

- **`ownerId`** (integer, Foreign Key → users.id, 인덱스)
  - **역할**: 시설 등록자 ID
  - **용도**: 등록자 식별, 권한 확인
  - **CASCADE**: 사용자 삭제 시 시설도 삭제
  - **제약사항**: 사업자번호 검증 완료된 사용자만 등록 가능

#### 시설 상태
- **`isActive`** (boolean, 기본값: true)
  - **역할**: 시설 활성화 여부
  - **용도**: 삭제된 시설 숨김 처리 (soft delete)
  - **false 시**: 목록에서 제외

#### 메타 정보
- **`createdAt`** (timestamp, 자동 생성)
  - **역할**: 시설 등록 시각
  - **용도**: 등록일 표시

- **`updatedAt`** (timestamp, 자동 업데이트)
  - **역할**: 시설 정보 수정 시각
  - **용도**: 최근 수정일 추적

---

## 6. notifications (알림)

**테이블 목적**: 사용자에게 전달되는 알림 메시지를 저장

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 알림 고유 식별자
  - **용도**: 알림 조회, 읽음 처리, 삭제 시 사용

#### 사용자 관계
- **`user`** (ManyToOne → User)
  - **역할**: 알림 수신자 객체
  - **용도**: 사용자 정보 조회

- **`userId`** (integer, Foreign Key → users.id, 인덱스)
  - **역할**: 알림 수신자 ID
  - **용도**: 사용자와 알림 연결
  - **CASCADE**: 사용자 삭제 시 알림도 삭제

#### 알림 정보
- **`type`** (enum, 인덱스)
  - **역할**: 알림 유형
  - **값 설명**:
    - `'group_join'`: 모임 참가 알림 (모임장에게)
    - `'group_leave'`: 모임 탈퇴 알림 (모임장에게)
    - `'group_closed'`: 모임 마감 알림 (참가자들에게)
    - `'group_deleted'`: 모임 삭제 알림 (참가자들에게)
    - `'facility_reservation'`: 시설 예약 알림
    - `'system'`: 시스템 알림
  - **용도**: 알림 유형별 처리, 필터링

- **`title`** (varchar(200))
  - **역할**: 알림 제목
  - **용도**: 알림 목록에서 표시
  - **예시**: "새로운 참가자"

- **`message`** (text)
  - **역할**: 알림 메시지 내용
  - **용도**: 알림 상세 내용 표시
  - **예시**: "홍길동님이 '청민 배드민턴' 모임에 참가했습니다."

- **`metadata`** (json, nullable)
  - **역할**: 추가 데이터 (구조화된 정보)
  - **형식**: JSON 객체
  - **용도**: 알림 클릭 시 상세 페이지로 이동 등
  - **예시**:
    ```json
    {
      "groupId": 2,
      "groupName": "청민 배드민턴",
      "participantId": 10,
      "participantNickname": "홍길동"
    }
    ```

#### 읽음 상태
- **`isRead`** (boolean, 기본값: false)
  - **역할**: 알림 읽음 여부
  - **용도**: 읽지 않은 알림 개수 표시, 읽음 처리
  - **업데이트 시점**: 사용자가 알림을 확인했을 때 true

#### 메타 정보
- **`createdAt`** (timestamp, 자동 생성)
  - **역할**: 알림 생성 시각
  - **용도**: 알림 시간 표시, 최신순 정렬

---

## 7. phone_verifications (전화번호 인증)

**테이블 목적**: 전화번호 인증 과정에서 발송된 인증번호를 저장

### 속성 상세 설명

#### 기본 식별자
- **`id`** (Primary Key, integer, 자동 증가)
  - **역할**: 인증 레코드 고유 식별자
  - **용도**: 인증번호 검증, 이력 추적

#### 인증 정보
- **`phone`** (varchar(20), 인덱스)
  - **역할**: 인증 대상 전화번호
  - **형식**: `010-1234-5678` 또는 `01012345678` (하이픈 제거 후 저장)
  - **용도**: 인증번호 발송, 검증 시 전화번호 식별
  - **제약사항**: 1시간에 최대 3회 요청 가능

- **`code`** (varchar(6))
  - **역할**: 발송된 인증번호
  - **형식**: 6자리 숫자 (100000 ~ 999999)
  - **생성**: `crypto.randomInt(100000, 999999)`로 랜덤 생성
  - **용도**: 사용자가 입력한 번호와 비교하여 인증
  - **유효기간**: 5분 (`expires_at` 기준)

- **`verified`** (boolean, 기본값: false)
  - **역할**: 인증 완료 여부
  - **값 설명**:
    - `false`: 발송 후 미인증 상태
    - `true`: 인증번호 일치 시 인증 완료
  - **용도**: 중복 인증 방지, 인증 완료 여부 확인
  - **업데이트 시점**: 인증번호 일치 시 true로 변경

- **`attemptCount`** (integer, 기본값: 0)
  - **역할**: 인증번호 입력 시도 횟수
  - **용도**: 무차별 대입 공격 방지
  - **제한**: 최대 5회 (초과 시 재요청 필요)
  - **업데이트 시점**: 잘못된 인증번호 입력 시 +1

#### 시간 정보
- **`createdAt`** (timestamp, 자동 생성)
  - **역할**: 인증번호 발송 시각
  - **용도**: 1시간 내 발송 횟수 제한 계산, 인증 완료 후 24시간 유효성 확인

- **`expiresAt`** (timestamp)
  - **역할**: 인증번호 만료 시각
  - **계산**: `createdAt + 5분`
  - **용도**: 만료된 인증번호 사용 방지
  - **검증**: 현재 시간이 `expiresAt`을 넘으면 만료 처리

---

## 🔗 테이블 간 관계 요약

### 주요 관계도

```
users (1) ──< (N) social_accounts
users (1) ──< (N) groups (creator)
users (1) ──< (N) group_participants
groups (1) ──< (N) group_participants
users (1) ──< (N) facilities (owner)
users (1) ──< (N) notifications
```

### CASCADE 삭제 규칙

- **users 삭제 시**:
  - `social_accounts` 자동 삭제
  - `groups` (생성한 모임) 자동 삭제
  - `group_participants` (참가한 모임) 자동 삭제
  - `facilities` (등록한 시설) 자동 삭제
  - `notifications` 자동 삭제

- **groups 삭제 시**:
  - `group_participants` 자동 삭제

---

## 📝 참고사항

1. **인덱스**: 자주 조회되는 컬럼에 인덱스가 설정되어 있어 검색 성능이 최적화되어 있습니다.
2. **nullable**: 선택 입력 항목은 대부분 nullable로 설정되어 있습니다.
3. **기본값**: boolean 필드는 대부분 `false`가 기본값입니다.
4. **자동 생성/업데이트**: `createdAt`, `updatedAt`은 TypeORM이 자동으로 관리합니다.
5. **CASCADE 삭제**: 외래 키 관계에서 부모 레코드 삭제 시 자식 레코드도 자동 삭제됩니다.

---

**문서 작성일**: 2026-01-04  
**최종 업데이트**: 2026-01-04
